spring:
  application:
    name: analyzer

  datasource:
    url: ${DATABASE_URL:jdbc:postgresql://localhost:5432/hub_router}
    username: ${DATABASE_USERNAME:postgres}
    password: ${DATABASE_PASSWORD:postgres}
    driver-class-name: org.postgresql.Driver

  jpa:
    hibernate:
      ddl-auto: update
    show-sql: true

analyzer:
  kafka:
    # ← ДОБАВЬТЕ ЭТОТ БЛОК (названия топиков):
    topics:
      hub-events: hub-events            # для событий от хабов
      snapshots-events: snapshots       # для снапшотов состояний

    consumer:
      hub:
        bootstrap-servers: ${KAFKA_BOOTSTRAP_SERVERS:localhost:9092}
        key-deserializer: org.apache.kafka.common.serialization.StringDeserializer
        value-deserializer: org.apache.kafka.common.serialization.ByteArrayDeserializer
        group-id: events.analyzer
        enable-auto-commit: false
        auto-offset-reset: earliest      # ← Уже есть, хорошо!
      snapshot:
        bootstrap-servers: ${KAFKA_BOOTSTRAP_SERVERS:localhost:9092}
        group-id: snapshot.analyzer
        key-deserializer: org.apache.kafka.common.serialization.StringDeserializer
        value-deserializer: org.apache.kafka.common.serialization.ByteArrayDeserializer
        enable-auto-commit: false
        auto-offset-reset: earliest      # ← Уже есть, хорошо!

grpc:
  client:
    hub-router:
      address: ${GRPC_SERVER_ADDRESS:static://localhost:59090}
      enableKeepAlive: true
      keepAliveWithoutCalls: true
      negotiationType: plaintext